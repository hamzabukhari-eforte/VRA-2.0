// VRA Admin CMS – Supabase (PostgreSQL) via Prisma
// Run: npx prisma generate && npx prisma db push (or migrate)
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

// ─── Shared section images (ImageTextSectionAbout) ─────────────────────────
// One row per section key; same image reused everywhere that key is used
model SharedSection {
  id        String   @id @default(cuid())
  slug      String   @unique // e.g. overseas_cricket_talent, sports_clinics, cultural_events, mission, vision, volunteer, ground_1, ground_2, culture
  imagePath String?  // Supabase Storage path (bucket: cms)
  updatedAt DateTime @updatedAt
}

// ─── Homepage ─────────────────────────────────────────────────────────────
model HomepageGalleryImage {
  id         String   @id @default(cuid())
  storagePath String
  order      Int      @default(0)
  createdAt  DateTime @updatedAt
}

model CrowdSection {
  id          String   @id @default(cuid())
  imagePath   String?
  title       String?
  description String?
  updatedAt   DateTime @updatedAt
}
// Single row; use findFirst

model Team {
  id          String   @id @default(cuid())
  name        String
  imagePath   String?
  order       Int      @default(0)
  createdAt   DateTime @updatedAt
}

model Sponsor {
  id        String   @id @default(cuid())
  name      String
  logoPath  String?
  websiteUrl String?
  order     Int      @default(0)
  createdAt DateTime @updatedAt
}

// ─── About page (section images + board) ───────────────────────────────────
model AboutSectionImage {
  id         String   @id @default(cuid())
  sectionKey String   @unique // mission, vision, volunteer
  imagePath  String?
  updatedAt  DateTime @updatedAt
}

model BoardMember {
  id         String   @id @default(cuid())
  imagePath  String?
  order      Int      @default(0)
  updatedAt  DateTime @updatedAt
}

// ─── Facility (ground images) – use SharedSection with slug ground_1, ground_2, etc. ───
// Or dedicated table:
model FacilityGroundImage {
  id         String   @id @default(cuid())
  groundKey  String   @unique // ground_1, ground_2, outdoor_nets, indoor_nets, pavilion, etc.
  imagePath  String?
  updatedAt  DateTime @updatedAt
}

// ─── VRA Cricket page ─────────────────────────────────────────────────────
model TeamCount {
  id       String   @id @default(cuid())
  mens     Int      @default(7)
  womens   Int      @default(1)
  youth    Int      @default(9)
  zalmisXi Int      @default(2)
  updatedAt DateTime @updatedAt
}
// Single row

model FacilityCarouselImage {
  id          String   @id @default(cuid())
  storagePath String
  order       Int      @default(0)
  createdAt   DateTime @updatedAt
}

// ─── Form submissions (read-only in admin) ─────────────────────────────────
model ContactSubmission {
  id        String   @id @default(cuid())
  payload   Json     // { name, email, subject, message, ... }
  createdAt DateTime @default(now())
}

model MembershipSubmission {
  id        String   @id @default(cuid())
  payload   Json
  createdAt DateTime @default(now())
}

model MembershipTerminationSubmission {
  id        String   @id @default(cuid())
  payload   Json
  createdAt DateTime @default(now())
}

model DonationSubmission {
  id        String   @id @default(cuid())
  payload   Json
  createdAt DateTime @default(now())
}

model IndoorNetBookingSubmission {
  id        String   @id @default(cuid())
  payload   Json
  createdAt DateTime @default(now())
}
